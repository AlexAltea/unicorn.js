<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>

    <title>Unicorn.js</title>

    <!-- External fonts -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>

    <!-- External icons -->
    <link href="//cdn.materialdesignicons.com/1.8.36/css/materialdesignicons.min.css" rel="stylesheet">

    <!-- Style -->
    <link href='demos/demo.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar" role="navigation">
      <a class="navbar-brand" href="..">Unicorn.js</a>
      <span class="navbar-sep"></span>
      <a class="navbar-demo">Loading...</a>
    </nav>

    <!-- UI -->
    <div id="pane-l" class="split split-horizontal">
      <div id="pane-lt" class="split pane">
        <!-- Assembler -->
        <div class="toolbar">
          <div class="toolbar-button" onclick="paneAssembler.emuStart()" title="Run">
            <i class="mdi mdi-play"></i>
          </div>
          <div class="toolbar-button disabled" title="Pause">
            <i class="mdi mdi-pause"></i>
          </div>
          <div class="toolbar-button disabled" title="Step into">
            <i class="mdi mdi-debug-step-into"></i>
          </div>
          <div class="toolbar-button disabled" title="Step over">
            <i class="mdi mdi-debug-step-over"></i>
          </div>
          <div class="toolbar-button disabled" title="Step out">
            <i class="mdi mdi-debug-step-out"></i>
          </div>
        </div>
        <div class="content">
          <table id="assembler">
            <tr><th>Address</th><th>Bytes</th><th>Assembly</th></tr>
          </table>
        </div>
      </div>
      <div id="pane-lb" class="split pane">
        <div class="toolbar">
          Memory
        </div>
      </div>
    </div>
    <div id="pane-r" class="split split-horizontal">
      <div id="pane-rt" class="split pane">
        <div class="toolbar">
          Registers
        </div>
        <div class="content">
          <table id="registers"></table>
        </div>
      </div>
      <!--div id="pane-rb" class="split pane">
        <div class="toolbar">
          Stack
        </div>
      </div-->
    </div>

    <!-- External scripts -->
    <script src="//code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.2/require.min.js"></script>
    <script src="demos/externals/split.min.js"></script>

    <!-- Unicorn.js demo -->
    <script src="demos/demo.js"></script>
    <script>
      // Require.JS
      requirejs.config({
          shim: {
              'demos/demo-arm': [
                'dist/unicorn-arm.min',
                'demos/externals/keystone-arm.min',
                'demos/externals/keystone-arm.min'],
              'demos/demo-mips': [
                'dist/unicorn-mips.min',
                'demos/externals/keystone-mips.min',
                'demos/externals/keystone-mips.min'],
              'demos/demo-sparc': [
                'dist/unicorn-sparc.min',
                'demos/externals/keystone-sparc.min',
                'demos/externals/keystone-sparc.min'],
              'demos/demo-x86': [
                'dist/unicorn-x86.min',
                'demos/externals/keystone-x86.min',
                'demos/externals/keystone-x86.min'],
          }
      });
      // Get URL anchor-based parameters
      var query = {};
      var params = window.location.hash.substr(1);
      params.split("&").forEach(function(part) {
        var item = part.split("=");
        query[item[0]] = decodeURIComponent(item[1]);
      });

      // Get needed scripts from URL anchor-based parameters
      var scripts = []
      switch (query['arch']) {
      case 'arm':
        requirejs(['demos/demo-arm']);
        break;
      case 'x86':
        requirejs(['demos/demo-x86']);
        break;
      default:
        window.location = './index.html';
      }
    </script>
  </body>
</html>
